<?php session_start(); $uFile=__DIR__.'/../data/users.json'; $errs=[]; if($_SERVER['REQUEST_METHOD']==='POST'){ $e=$_POST['email']; $p=$_POST['password']; if(!$e||!$p) $errs[]='Vui lòng nhập email và mật khẩu'; $users=file_exists($uFile)?json_decode(file_get_contents($uFile),true):[]; foreach($users as $us) if($us['email']===$e) $errs[]='Email đã tồn tại'; if(empty($errs)){ $users[]=['email'=>$e,'password'=>password_hash($p,PASSWORD_DEFAULT)]; file_put_contents($uFile,json_encode($users,JSON_PRETTY_PRINT|JSON_UNESCAPED_UNICODE)); header('Location:/index.php'); exit; } } include __DIR__.'/../includes/header.php'; ?><div class="card"><h2>Đăng ký</h2><?php foreach($errs as $er): ?><div style="color:red" class="small"><?=$er?></div><?php endforeach; ?><form method="post"><input class="form-input" name="email" placeholder="Email"><input class="form-input" name="password" type="password" placeholder="Mật khẩu"><div style="text-align:right"><button class="btn" type="submit">Đăng ký</button></div></form></div><?php include __DIR__.'/../includes/footer.php'; ?>